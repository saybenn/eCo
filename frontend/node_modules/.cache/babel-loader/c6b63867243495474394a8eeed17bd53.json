{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/elijr/Desktop/CODING/Personal Projects/Portfolio/eco/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/elijr/Desktop/CODING/Personal Projects/Portfolio/eco/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\elijr\\\\Desktop\\\\CODING\\\\Personal Projects\\\\Portfolio\\\\eco\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import axios from\"axios\";import React,{useState,useEffect}from\"react\";import{Link,useNavigate,useParams}from\"react-router-dom\";import{Form,Button}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import Container from\"../components/Container\";import Message from\"../components/Message\";import Loader from\"../components/Loader\";import FormContainer from\"../components/FormContainer\";import{getProductDetails,updateProduct}from\"../actions/productActions\";import{PRODUCT_LIST_RESET,PRODUCT_UPDATE_RESET}from\"../constants/productConstants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ProductEditScreen=function ProductEditScreen(){var _useParams=useParams(),id=_useParams.id;var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),price=_useState6[0],setPrice=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),image=_useState8[0],setImage=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),brand=_useState10[0],setBrand=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),options=_useState12[0],setOptions=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),optionName=_useState14[0],setOptionName=_useState14[1];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),category=_useState16[0],setCategory=_useState16[1];var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),countInStock=_useState18[0],setCountInStock=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),uploading=_useState20[0],setUploading=_useState20[1];var dispatch=useDispatch();var productDetails=useSelector(function(state){return state.productDetails;});var loading=productDetails.loading,error=productDetails.error,product=productDetails.product;var productUpdate=useSelector(function(state){return state.productUpdate;});var loadingUpdate=productUpdate.loading,errorUpdate=productUpdate.error,successUpdate=productUpdate.success;useEffect(function(){if(!product.name||product._id!==id){dispatch(getProductDetails(id));}else{setName(product.name);setPrice(product.price);setImage(product.image);setBrand(product.brand);setCategory(product.category);setCountInStock(product.countInStock);setDescription(product.description);}if(successUpdate){dispatch({type:PRODUCT_UPDATE_RESET});}},[dispatch,successUpdate,id,product,navigate]);var uploadFileHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var file,formData,config,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:file=e.target.files[0];formData=new FormData();formData.append(\"image\",file);setUploading(true);_context.prev=4;config={headers:{\"Content-Type\":\"multipart/form-data\"}};_context.next=8;return axios.post(\"/api/upload\",formData,config);case 8:_yield$axios$post=_context.sent;data=_yield$axios$post.data;setImage(data);setUploading(false);_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](4);console.error(_context.t0);setUploading(false);case 18:case\"end\":return _context.stop();}}},_callee,null,[[4,14]]);}));return function uploadFileHandler(_x){return _ref.apply(this,arguments);};}();var submitHandler=function submitHandler(e){e.preventDefault();dispatch(updateProduct(id,name,price,image,brand,category,description,countInStock,options,optionName));dispatch({type:PRODUCT_LIST_RESET});navigate(\"/admin/productlist\");};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Container,{children:[\" \",/*#__PURE__*/_jsx(Link,{to:\"/admin/productlist\",className:\"btn btn-light my-3\",children:\"Go Back\"}),/*#__PURE__*/_jsxs(FormContainer,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Edit Product\"}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):loadingUpdate?/*#__PURE__*/_jsx(Loader,{}):errorUpdate?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorUpdate}):/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"name\",value:name,placeholder:\"Enter name\",onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"price\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Price\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",value:price,placeholder:\"Enter price\",onChange:function onChange(e){return setPrice(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"image\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Image\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:image,placeholder:\"Enter image url\",onChange:function onChange(e){return setImage(e.target.value);}}),/*#__PURE__*/_jsx(Form.Control,{id:\"image-file\",label:\"Choose File\",type:\"file\",onChange:uploadFileHandler}),uploading&&/*#__PURE__*/_jsx(Loader,{})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"brand\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Brand\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:brand,placeholder:\"Enter brand \",onChange:function onChange(e){return setBrand(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"countInStock\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Count In Stock\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",value:countInStock,placeholder:\"Enter Count In Stock \",onChange:function onChange(e){return setCountInStock(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"category\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Category\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:category,placeholder:\"Enter category \",onChange:function onChange(e){return setCategory(e.target.value);}}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:options,placeholder:\"Enter options\",onChange:function onChange(e){return setOptions(e.target.value);}}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:optionName,placeholder:\"Enter option Name \",onChange:function onChange(e){return setOptionName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"description\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Description\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:description,placeholder:\"Enter description \",onChange:function onChange(e){return setDescription(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"Update\"})]})]})]})});};export default ProductEditScreen;","map":{"version":3,"sources":["C:/Users/elijr/Desktop/CODING/Personal Projects/Portfolio/eco/frontend/src/screens/ProductEditScreen.js"],"names":["axios","React","useState","useEffect","Link","useNavigate","useParams","Form","Button","useDispatch","useSelector","Container","Message","Loader","FormContainer","getProductDetails","updateProduct","PRODUCT_LIST_RESET","PRODUCT_UPDATE_RESET","ProductEditScreen","id","navigate","name","setName","description","setDescription","price","setPrice","image","setImage","brand","setBrand","options","setOptions","optionName","setOptionName","category","setCategory","countInStock","setCountInStock","uploading","setUploading","dispatch","productDetails","state","loading","error","product","productUpdate","loadingUpdate","errorUpdate","successUpdate","success","_id","type","uploadFileHandler","e","file","target","files","formData","FormData","append","config","headers","post","data","console","submitHandler","preventDefault","value"],"mappings":"oeAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,IAAT,CAAeC,WAAf,CAA4BC,SAA5B,KAA6C,kBAA7C,CACA,OAASC,IAAT,CAAeC,MAAf,KAA6B,iBAA7B,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,aAAP,KAA0B,6BAA1B,CACA,OAASC,iBAAT,CAA4BC,aAA5B,KAAiD,2BAAjD,CACA,OACEC,kBADF,CAEEC,oBAFF,KAGO,+BAHP,C,6IAKA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CAC9B,eAAeb,SAAS,EAAxB,CAAQc,EAAR,YAAQA,EAAR,CACA,GAAMC,CAAAA,QAAQ,CAAGhB,WAAW,EAA5B,CACA,cAAwBH,QAAQ,CAAC,EAAD,CAAhC,wCAAOoB,IAAP,eAAaC,OAAb,eACA,eAAsCrB,QAAQ,CAAC,EAAD,CAA9C,yCAAOsB,WAAP,eAAoBC,cAApB,eACA,eAA0BvB,QAAQ,CAAC,CAAD,CAAlC,yCAAOwB,KAAP,eAAcC,QAAd,eACA,eAA0BzB,QAAQ,CAAC,EAAD,CAAlC,yCAAO0B,KAAP,eAAcC,QAAd,eACA,eAA0B3B,QAAQ,CAAC,EAAD,CAAlC,0CAAO4B,KAAP,gBAAcC,QAAd,gBACA,gBAA8B7B,QAAQ,CAAC,EAAD,CAAtC,2CAAO8B,OAAP,gBAAgBC,UAAhB,gBACA,gBAAoC/B,QAAQ,CAAC,EAAD,CAA5C,2CAAOgC,UAAP,gBAAmBC,aAAnB,gBACA,gBAAgCjC,QAAQ,CAAC,CAAD,CAAxC,2CAAOkC,QAAP,gBAAiBC,WAAjB,gBACA,gBAAwCnC,QAAQ,CAAC,CAAD,CAAhD,2CAAOoC,YAAP,gBAAqBC,eAArB,gBACA,gBAAkCrC,QAAQ,CAAC,KAAD,CAA1C,2CAAOsC,SAAP,gBAAkBC,YAAlB,gBAEA,GAAMC,CAAAA,QAAQ,CAAGjC,WAAW,EAA5B,CAEA,GAAMkC,CAAAA,cAAc,CAAGjC,WAAW,CAAC,SAACkC,KAAD,QAAWA,CAAAA,KAAK,CAACD,cAAjB,EAAD,CAAlC,CACA,GAAQE,CAAAA,OAAR,CAAoCF,cAApC,CAAQE,OAAR,CAAiBC,KAAjB,CAAoCH,cAApC,CAAiBG,KAAjB,CAAwBC,OAAxB,CAAoCJ,cAApC,CAAwBI,OAAxB,CAEA,GAAMC,CAAAA,aAAa,CAAGtC,WAAW,CAAC,SAACkC,KAAD,QAAWA,CAAAA,KAAK,CAACI,aAAjB,EAAD,CAAjC,CACA,GACWC,CAAAA,aADX,CAIID,aAJJ,CACEH,OADF,CAESK,WAFT,CAIIF,aAJJ,CAEEF,KAFF,CAGWK,aAHX,CAIIH,aAJJ,CAGEI,OAHF,CAMAjD,SAAS,CAAC,UAAM,CACd,GAAI,CAAC4C,OAAO,CAACzB,IAAT,EAAiByB,OAAO,CAACM,GAAR,GAAgBjC,EAArC,CAAyC,CACvCsB,QAAQ,CAAC3B,iBAAiB,CAACK,EAAD,CAAlB,CAAR,CACD,CAFD,IAEO,CACLG,OAAO,CAACwB,OAAO,CAACzB,IAAT,CAAP,CACAK,QAAQ,CAACoB,OAAO,CAACrB,KAAT,CAAR,CACAG,QAAQ,CAACkB,OAAO,CAACnB,KAAT,CAAR,CACAG,QAAQ,CAACgB,OAAO,CAACjB,KAAT,CAAR,CACAO,WAAW,CAACU,OAAO,CAACX,QAAT,CAAX,CACAG,eAAe,CAACQ,OAAO,CAACT,YAAT,CAAf,CACAb,cAAc,CAACsB,OAAO,CAACvB,WAAT,CAAd,CACD,CAED,GAAI2B,aAAJ,CAAmB,CACjBT,QAAQ,CAAC,CAAEY,IAAI,CAAEpC,oBAAR,CAAD,CAAR,CACD,CACF,CAhBQ,CAgBN,CAACwB,QAAD,CAAWS,aAAX,CAA0B/B,EAA1B,CAA8B2B,OAA9B,CAAuC1B,QAAvC,CAhBM,CAAT,CAkBA,GAAMkC,CAAAA,iBAAiB,0FAAG,iBAAOC,CAAP,kKAClBC,IADkB,CACXD,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe,CAAf,CADW,CAElBC,QAFkB,CAEP,GAAIC,CAAAA,QAAJ,EAFO,CAGxBD,QAAQ,CAACE,MAAT,CAAgB,OAAhB,CAAyBL,IAAzB,EACAhB,YAAY,CAAC,IAAD,CAAZ,CAJwB,gBAOhBsB,MAPgB,CAOP,CACbC,OAAO,CAAE,CACP,eAAgB,qBADT,CADI,CAPO,uBAYChE,CAAAA,KAAK,CAACiE,IAAN,CAAW,aAAX,CAA0BL,QAA1B,CAAoCG,MAApC,CAZD,wCAYdG,IAZc,mBAYdA,IAZc,CActBrC,QAAQ,CAACqC,IAAD,CAAR,CACAzB,YAAY,CAAC,KAAD,CAAZ,CAfsB,iFAiBtB0B,OAAO,CAACrB,KAAR,cACAL,YAAY,CAAC,KAAD,CAAZ,CAlBsB,qEAAH,kBAAjBc,CAAAA,iBAAiB,4CAAvB,CAsBA,GAAMa,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACZ,CAAD,CAAO,CAC3BA,CAAC,CAACa,cAAF,GACA3B,QAAQ,CACN1B,aAAa,CACXI,EADW,CAEXE,IAFW,CAGXI,KAHW,CAIXE,KAJW,CAKXE,KALW,CAMXM,QANW,CAOXZ,WAPW,CAQXc,YARW,CASXN,OATW,CAUXE,UAVW,CADP,CAAR,CAcAQ,QAAQ,CAAC,CAAEY,IAAI,CAAErC,kBAAR,CAAD,CAAR,CACAI,QAAQ,CAAC,oBAAD,CAAR,CACD,CAlBD,CAoBA,mBACE,sCACE,MAAC,SAAD,YACG,GADH,cAEE,KAAC,IAAD,EAAM,EAAE,CAAC,oBAAT,CAA8B,SAAS,CAAC,oBAAxC,qBAFF,cAKE,MAAC,aAAD,yBACE,oCADF,CAEGwB,OAAO,cACN,KAAC,MAAD,IADM,CAEJC,KAAK,cACP,KAAC,OAAD,EAAS,OAAO,CAAC,QAAjB,UAA2BA,KAA3B,EADO,CAELG,aAAa,cACf,KAAC,MAAD,IADe,CAEbC,WAAW,cACb,KAAC,OAAD,EAAS,OAAO,CAAC,QAAjB,UAA2BA,WAA3B,EADa,cAGb,MAAC,IAAD,EAAM,QAAQ,CAAEkB,aAAhB,wBACE,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,MAAtB,wBACE,KAAC,IAAD,CAAM,KAAN,mBADF,cAEE,KAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,MADP,CAEE,KAAK,CAAE9C,IAFT,CAGE,WAAW,CAAC,YAHd,CAIE,QAAQ,CAAE,kBAACkC,CAAD,QAAOjC,CAAAA,OAAO,CAACiC,CAAC,CAACE,MAAF,CAASY,KAAV,CAAd,EAJZ,EAFF,GADF,cAWE,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,OAAtB,wBACE,KAAC,IAAD,CAAM,KAAN,oBADF,cAEE,KAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAE5C,KAFT,CAGE,WAAW,CAAC,aAHd,CAIE,QAAQ,CAAE,kBAAC8B,CAAD,QAAO7B,CAAAA,QAAQ,CAAC6B,CAAC,CAACE,MAAF,CAASY,KAAV,CAAf,EAJZ,EAFF,GAXF,cAqBE,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,OAAtB,wBACE,KAAC,IAAD,CAAM,KAAN,oBADF,cAEE,KAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,MADP,CAEE,KAAK,CAAE1C,KAFT,CAGE,WAAW,CAAC,iBAHd,CAIE,QAAQ,CAAE,kBAAC4B,CAAD,QAAO3B,CAAAA,QAAQ,CAAC2B,CAAC,CAACE,MAAF,CAASY,KAAV,CAAf,EAJZ,EAFF,cAQE,KAAC,IAAD,CAAM,OAAN,EACE,EAAE,CAAC,YADL,CAEE,KAAK,CAAC,aAFR,CAGE,IAAI,CAAC,MAHP,CAIE,QAAQ,CAAEf,iBAJZ,EARF,CAcGf,SAAS,eAAI,KAAC,MAAD,IAdhB,GArBF,cAqCE,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,OAAtB,wBACE,KAAC,IAAD,CAAM,KAAN,oBADF,cAEE,KAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,MADP,CAEE,KAAK,CAAEV,KAFT,CAGE,WAAW,CAAC,cAHd,CAIE,QAAQ,CAAE,kBAAC0B,CAAD,QAAOzB,CAAAA,QAAQ,CAACyB,CAAC,CAACE,MAAF,CAASY,KAAV,CAAf,EAJZ,EAFF,GArCF,cA8CE,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,cAAtB,wBACE,KAAC,IAAD,CAAM,KAAN,6BADF,cAEE,KAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAEhC,YAFT,CAGE,WAAW,CAAC,uBAHd,CAIE,QAAQ,CAAE,kBAACkB,CAAD,QAAOjB,CAAAA,eAAe,CAACiB,CAAC,CAACE,MAAF,CAASY,KAAV,CAAtB,EAJZ,EAFF,GA9CF,cAuDE,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,UAAtB,wBACE,KAAC,IAAD,CAAM,KAAN,uBADF,cAEE,KAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,MADP,CAEE,KAAK,CAAElC,QAFT,CAGE,WAAW,CAAC,iBAHd,CAIE,QAAQ,CAAE,kBAACoB,CAAD,QAAOnB,CAAAA,WAAW,CAACmB,CAAC,CAACE,MAAF,CAASY,KAAV,CAAlB,EAJZ,EAFF,cAQE,KAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,MADP,CAEE,KAAK,CAAEtC,OAFT,CAGE,WAAW,CAAC,eAHd,CAIE,QAAQ,CAAE,kBAACwB,CAAD,QAAOvB,CAAAA,UAAU,CAACuB,CAAC,CAACE,MAAF,CAASY,KAAV,CAAjB,EAJZ,EARF,cAcE,KAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,MADP,CAEE,KAAK,CAAEpC,UAFT,CAGE,WAAW,CAAC,oBAHd,CAIE,QAAQ,CAAE,kBAACsB,CAAD,QAAOrB,CAAAA,aAAa,CAACqB,CAAC,CAACE,MAAF,CAASY,KAAV,CAApB,EAJZ,EAdF,GAvDF,cA4EE,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,aAAtB,wBACE,KAAC,IAAD,CAAM,KAAN,0BADF,cAEE,KAAC,IAAD,CAAM,OAAN,EACE,IAAI,CAAC,MADP,CAEE,KAAK,CAAE9C,WAFT,CAGE,WAAW,CAAC,oBAHd,CAIE,QAAQ,CAAE,kBAACgC,CAAD,QAAO/B,CAAAA,cAAc,CAAC+B,CAAC,CAACE,MAAF,CAASY,KAAV,CAArB,EAJZ,EAFF,GA5EF,cAsFE,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAC,SAA9B,oBAtFF,GAXJ,GALF,GADF,EADF,CAiHD,CAvMD,CAwMA,cAAenD,CAAAA,iBAAf","sourcesContent":["import axios from \"axios\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\r\nimport { Form, Button } from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Container from \"../components/Container\";\r\nimport Message from \"../components/Message\";\r\nimport Loader from \"../components/Loader\";\r\nimport FormContainer from \"../components/FormContainer\";\r\nimport { getProductDetails, updateProduct } from \"../actions/productActions\";\r\nimport {\r\n  PRODUCT_LIST_RESET,\r\n  PRODUCT_UPDATE_RESET,\r\n} from \"../constants/productConstants\";\r\n\r\nconst ProductEditScreen = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [name, setName] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [price, setPrice] = useState(0);\r\n  const [image, setImage] = useState(\"\");\r\n  const [brand, setBrand] = useState(\"\");\r\n  const [options, setOptions] = useState(\"\");\r\n  const [optionName, setOptionName] = useState(\"\");\r\n  const [category, setCategory] = useState(0);\r\n  const [countInStock, setCountInStock] = useState(0);\r\n  const [uploading, setUploading] = useState(false);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const productDetails = useSelector((state) => state.productDetails);\r\n  const { loading, error, product } = productDetails;\r\n\r\n  const productUpdate = useSelector((state) => state.productUpdate);\r\n  const {\r\n    loading: loadingUpdate,\r\n    error: errorUpdate,\r\n    success: successUpdate,\r\n  } = productUpdate;\r\n\r\n  useEffect(() => {\r\n    if (!product.name || product._id !== id) {\r\n      dispatch(getProductDetails(id));\r\n    } else {\r\n      setName(product.name);\r\n      setPrice(product.price);\r\n      setImage(product.image);\r\n      setBrand(product.brand);\r\n      setCategory(product.category);\r\n      setCountInStock(product.countInStock);\r\n      setDescription(product.description);\r\n    }\r\n\r\n    if (successUpdate) {\r\n      dispatch({ type: PRODUCT_UPDATE_RESET });\r\n    }\r\n  }, [dispatch, successUpdate, id, product, navigate]);\r\n\r\n  const uploadFileHandler = async (e) => {\r\n    const file = e.target.files[0];\r\n    const formData = new FormData();\r\n    formData.append(\"image\", file);\r\n    setUploading(true);\r\n\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      };\r\n      const { data } = await axios.post(\"/api/upload\", formData, config);\r\n\r\n      setImage(data);\r\n      setUploading(false);\r\n    } catch (error) {\r\n      console.error(error);\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();\r\n    dispatch(\r\n      updateProduct(\r\n        id,\r\n        name,\r\n        price,\r\n        image,\r\n        brand,\r\n        category,\r\n        description,\r\n        countInStock,\r\n        options,\r\n        optionName\r\n      )\r\n    );\r\n    dispatch({ type: PRODUCT_LIST_RESET });\r\n    navigate(\"/admin/productlist\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Container>\r\n        {\" \"}\r\n        <Link to=\"/admin/productlist\" className=\"btn btn-light my-3\">\r\n          Go Back\r\n        </Link>\r\n        <FormContainer>\r\n          <h1>Edit Product</h1>\r\n          {loading ? (\r\n            <Loader />\r\n          ) : error ? (\r\n            <Message variant=\"danger\">{error}</Message>\r\n          ) : loadingUpdate ? (\r\n            <Loader />\r\n          ) : errorUpdate ? (\r\n            <Message variant=\"danger\">{errorUpdate}</Message>\r\n          ) : (\r\n            <Form onSubmit={submitHandler}>\r\n              <Form.Group controlId=\"name\">\r\n                <Form.Label>Name</Form.Label>\r\n                <Form.Control\r\n                  type=\"name\"\r\n                  value={name}\r\n                  placeholder=\"Enter name\"\r\n                  onChange={(e) => setName(e.target.value)}\r\n                ></Form.Control>\r\n              </Form.Group>\r\n\r\n              <Form.Group controlId=\"price\">\r\n                <Form.Label>Price</Form.Label>\r\n                <Form.Control\r\n                  type=\"number\"\r\n                  value={price}\r\n                  placeholder=\"Enter price\"\r\n                  onChange={(e) => setPrice(e.target.value)}\r\n                ></Form.Control>\r\n              </Form.Group>\r\n\r\n              <Form.Group controlId=\"image\">\r\n                <Form.Label>Image</Form.Label>\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  value={image}\r\n                  placeholder=\"Enter image url\"\r\n                  onChange={(e) => setImage(e.target.value)}\r\n                ></Form.Control>\r\n                <Form.Control\r\n                  id=\"image-file\"\r\n                  label=\"Choose File\"\r\n                  type=\"file\"\r\n                  onChange={uploadFileHandler}\r\n                ></Form.Control>\r\n                {uploading && <Loader />}\r\n              </Form.Group>\r\n              <Form.Group controlId=\"brand\">\r\n                <Form.Label>Brand</Form.Label>\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  value={brand}\r\n                  placeholder=\"Enter brand \"\r\n                  onChange={(e) => setBrand(e.target.value)}\r\n                ></Form.Control>\r\n              </Form.Group>\r\n              <Form.Group controlId=\"countInStock\">\r\n                <Form.Label>Count In Stock</Form.Label>\r\n                <Form.Control\r\n                  type=\"number\"\r\n                  value={countInStock}\r\n                  placeholder=\"Enter Count In Stock \"\r\n                  onChange={(e) => setCountInStock(e.target.value)}\r\n                ></Form.Control>\r\n              </Form.Group>\r\n              <Form.Group controlId=\"category\">\r\n                <Form.Label>Category</Form.Label>\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  value={category}\r\n                  placeholder=\"Enter category \"\r\n                  onChange={(e) => setCategory(e.target.value)}\r\n                ></Form.Control>\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  value={options}\r\n                  placeholder=\"Enter options\"\r\n                  onChange={(e) => setOptions(e.target.value)}\r\n                ></Form.Control>\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  value={optionName}\r\n                  placeholder=\"Enter option Name \"\r\n                  onChange={(e) => setOptionName(e.target.value)}\r\n                ></Form.Control>\r\n              </Form.Group>\r\n              <Form.Group controlId=\"description\">\r\n                <Form.Label>Description</Form.Label>\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  value={description}\r\n                  placeholder=\"Enter description \"\r\n                  onChange={(e) => setDescription(e.target.value)}\r\n                ></Form.Control>\r\n              </Form.Group>\r\n\r\n              <Button type=\"submit\" variant=\"primary\">\r\n                Update\r\n              </Button>\r\n            </Form>\r\n          )}\r\n        </FormContainer>\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\nexport default ProductEditScreen;\r\n"]},"metadata":{},"sourceType":"module"}