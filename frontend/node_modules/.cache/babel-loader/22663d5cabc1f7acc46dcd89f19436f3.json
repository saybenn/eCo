{"ast":null,"code":"import React,{useEffect}from\"react\";import{Link}from\"react-router-dom\";import{useSelector,useDispatch}from\"react-redux\";import{Col,Row,Button,Image,ListGroup,Card}from\"react-bootstrap\";import Container from\"../components/Container\";import{useNavigate}from\"react-router-dom\";import Loader from\"../components/Loader\";import Message from\"../components/Message\";import{getCart,controlCart}from\"../actions/cartActions\";import{logout}from\"../actions/userActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CartScreen=function CartScreen(){var dispatch=useDispatch();var navigate=useNavigate();var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var cartGet=useSelector(function(state){return state.cartGet;});var cartItems=cartGet.cartItems,loading=cartGet.loading,error=cartGet.error;var cartControl=useSelector(function(state){return state.cartControl;});var success=cartControl.success;useEffect(function(){dispatch(getCart());if(!userInfo){dispatch(logout());navigate(\"/login\");}if(success){dispatch(getCart());}},[dispatch,navigate,userInfo,success]);var checkoutHandler=function checkoutHandler(){navigate(\"/shipping\");};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),loading&&/*#__PURE__*/_jsx(Loader,{}),error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}),cartItems&&cartItems.length>0&&/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:9,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true,sm:1})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.productId),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:1,children:[\"$\",item.price]}),/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsxs(Row,{className:\"d-flex justify-content-center align-items-center\",children:[/*#__PURE__*/_jsx(Col,{md:1,children:item.qty}),/*#__PURE__*/_jsxs(Col,{md:1,children:[\" \",/*#__PURE__*/_jsx(Button,{variant:\"link\",onClick:function onClick(){return dispatch(controlCart(item._id,\"up\"));},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sort-up\"})}),\" \",/*#__PURE__*/_jsx(Button,{variant:\"link\",onClick:function onClick(){return dispatch(controlCart(item._id,\"down\"));},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sort-down\"})})]})]})}),/*#__PURE__*/_jsxs(Col,{className:\"d-flex justify-content-center\",md:2,children:[\"$\",item.totalPrice.toFixed(2)]}),/*#__PURE__*/_jsxs(Col,{md:1,children:[\" \",/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return dispatch(controlCart(item._id,\"trash\"));},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash-alt\"})})]})]})},item._id);})})})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Subtotal \\n                    \".concat(cartItems&&cartItems.reduce(function(acc,item){return acc+item.qty;},0),\"\\n                    items\")}),\"$\",cartItems&&cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0).toFixed(2)]}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Link,{to:\"/shipping\",children:/*#__PURE__*/_jsx(Button,{className:\"btn-block btn-dark\",disabled:cartItems&&cartItems.length===0,children:\"Proceed to Checkout\"})})})]})})})]}),cartItems&&cartItems.length===0&&/*#__PURE__*/_jsxs(Message,{children:[\"You cart is empty \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Back\"})]})]})});};export default CartScreen;","map":{"version":3,"sources":["C:/Users/elijr/Desktop/CODING/Personal Projects/Portfolio/eco/frontend/src/screens/CartScreen.js"],"names":["React","useEffect","Link","useSelector","useDispatch","Col","Row","Button","Image","ListGroup","Card","Container","useNavigate","Loader","Message","getCart","controlCart","logout","CartScreen","dispatch","navigate","userLogin","state","userInfo","cartGet","cartItems","loading","error","cartControl","success","checkoutHandler","length","map","item","image","name","productId","price","qty","_id","totalPrice","toFixed","reduce","acc"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Col, Row, Button, Image, ListGroup, Card } from \"react-bootstrap\";\r\nimport Container from \"../components/Container\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Loader from \"../components/Loader\";\r\nimport Message from \"../components/Message\";\r\nimport { getCart, controlCart } from \"../actions/cartActions\";\r\nimport { logout } from \"../actions/userActions\";\r\n\r\nconst CartScreen = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n\r\n  const cartGet = useSelector((state) => state.cartGet);\r\n  const { cartItems, loading, error } = cartGet;\r\n\r\n  const cartControl = useSelector((state) => state.cartControl);\r\n  const { success } = cartControl;\r\n\r\n  useEffect(() => {\r\n    dispatch(getCart());\r\n\r\n    if (!userInfo) {\r\n      dispatch(logout());\r\n      navigate(\"/login\");\r\n    }\r\n\r\n    if (success) {\r\n      dispatch(getCart());\r\n    }\r\n  }, [dispatch, navigate, userInfo, success]);\r\n\r\n  const checkoutHandler = () => {\r\n    navigate(\"/shipping\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Container>\r\n        <h1>Shopping Cart</h1>\r\n        {loading && <Loader />}\r\n        {error && <Message variant=\"danger\">{error}</Message>}\r\n        {cartItems && cartItems.length > 0 && (\r\n          <Row>\r\n            <Col md={9}>\r\n              <Card>\r\n                <ListGroup variant=\"flush\">\r\n                  {cartItems.map((item) => (\r\n                    <ListGroup.Item key={item._id}>\r\n                      <Row className=\"d-flex justify-content-between align-items-center\">\r\n                        <Col md={2}>\r\n                          <Image\r\n                            src={item.image}\r\n                            alt={item.name}\r\n                            fluid\r\n                            rounded\r\n                            sm={1}\r\n                          />\r\n                        </Col>\r\n                        <Col md={2}>\r\n                          <Link to={`/product/${item.productId}`}>\r\n                            {item.name}\r\n                          </Link>\r\n                        </Col>\r\n                        <Col md={1}>${item.price}</Col>\r\n                        <Col md={1}>\r\n                          <Row className=\"d-flex justify-content-center align-items-center\">\r\n                            <Col md={1}>{item.qty}</Col>\r\n\r\n                            <Col md={1}>\r\n                              {\" \"}\r\n                              <Button\r\n                                variant=\"link\"\r\n                                onClick={() =>\r\n                                  dispatch(controlCart(item._id, \"up\"))\r\n                                }\r\n                              >\r\n                                <i className=\"fas fa-sort-up\"></i>\r\n                              </Button>{\" \"}\r\n                              <Button\r\n                                variant=\"link\"\r\n                                onClick={() =>\r\n                                  dispatch(controlCart(item._id, \"down\"))\r\n                                }\r\n                              >\r\n                                <i className=\"fas fa-sort-down\"></i>\r\n                              </Button>\r\n                            </Col>\r\n                          </Row>\r\n                        </Col>\r\n                        <Col className=\"d-flex justify-content-center\" md={2}>\r\n                          ${item.totalPrice.toFixed(2)}\r\n                        </Col>\r\n                        <Col md={1}>\r\n                          {\" \"}\r\n                          <Button\r\n                            onClick={() =>\r\n                              dispatch(controlCart(item._id, \"trash\"))\r\n                            }\r\n                          >\r\n                            <i className=\"fas fa-trash-alt\"></i>\r\n                          </Button>\r\n                        </Col>\r\n                      </Row>\r\n                    </ListGroup.Item>\r\n                  ))}\r\n                </ListGroup>\r\n              </Card>\r\n            </Col>\r\n\r\n            <Col md={3}>\r\n              <Card>\r\n                <ListGroup variant=\"flush\">\r\n                  <ListGroup.Item>\r\n                    <h2>\r\n                      {`Subtotal \r\n                    ${\r\n                      cartItems &&\r\n                      cartItems.reduce((acc, item) => acc + item.qty, 0)\r\n                    }\r\n                    items`}\r\n                    </h2>\r\n                    $\r\n                    {cartItems &&\r\n                      cartItems\r\n                        .reduce((acc, item) => acc + item.qty * item.price, 0)\r\n                        .toFixed(2)}\r\n                  </ListGroup.Item>\r\n                  <ListGroup.Item>\r\n                    <Link to=\"/shipping\">\r\n                      <Button\r\n                        className=\"btn-block btn-dark\"\r\n                        disabled={cartItems && cartItems.length === 0}\r\n                      >\r\n                        Proceed to Checkout\r\n                      </Button>\r\n                    </Link>\r\n                  </ListGroup.Item>\r\n                </ListGroup>\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n        )}\r\n        {cartItems && cartItems.length === 0 && (\r\n          <Message>\r\n            You cart is empty <Link to=\"/\">Go Back</Link>\r\n          </Message>\r\n        )}\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CartScreen;\r\n"]},"metadata":{},"sourceType":"module"}