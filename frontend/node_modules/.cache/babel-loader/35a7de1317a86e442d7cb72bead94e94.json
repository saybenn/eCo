{"ast":null,"code":"import jwt from\"jsonwebtoken\";import{createStore,combineReducers,applyMiddleware}from\"redux\";import thunk from\"redux-thunk\";import{composeWithDevTools}from\"redux-devtools-extension\";import{blogListReducer,blogCommentReducer,blogCommentDeleteReducer,blogPostDeleteReducer,blogLikeReducer,topBlogReducer,myBlogReducer,singleBlogReducer,blogCreateReducer}from\"./reducers/blogReducers.js\";import{productListReducer,productDetailsReducer,topProductsReducer,productReviewReducer,productCreateReducer,productDeleteReducer,productUpdateReducer}from\"./reducers/productReducers.js\";import{userRegisterReducer,userUpdateProfileReducer,userProfileReducer,userDetailsReducer,userLoginReducer,userListReducer,userDeleteReducer,userUpdateReducer,userAuthorReducer}from\"./reducers/userReducers.js\";import{cartAddReducer,cartGetReducer,cartControlReducer}from\"./reducers/cartReducers.js\";import{orderListReducer,orderCreateReducer,orderDetailsReducer,orderPayReducer,orderDeliverReducer,orderAllReducer}from\"./reducers/orderReducers.js\";var reducer=combineReducers({blogLike:blogLikeReducer,blogComment:blogCommentReducer,blogList:blogListReducer,blogCommentDelete:blogCommentDeleteReducer,blogDeletePost:blogPostDeleteReducer,myBlogs:myBlogReducer,topBlog:topBlogReducer,singleBlog:singleBlogReducer,createBlog:blogCreateReducer,productList:productListReducer,productDetails:productDetailsReducer,topProducts:topProductsReducer,productReview:productReviewReducer,productCreate:productCreateReducer,productDelete:productDeleteReducer,productUpdate:productUpdateReducer,userRegister:userRegisterReducer,userUpdateProfile:userUpdateProfileReducer,userDetails:userDetailsReducer,userProfile:userProfileReducer,userAuthor:userAuthorReducer,userLogin:userLoginReducer,userList:userListReducer,userDelete:userDeleteReducer,userUpdate:userUpdateReducer,cartAdd:cartAddReducer,cartGet:cartGetReducer,cartControl:cartControlReducer,orderList:orderListReducer,orderCreate:orderCreateReducer,orderDetails:orderDetailsReducer,orderPay:orderPayReducer,orderDeliver:orderDeliverReducer,orderAll:orderAllReducer});var userInfoFromStorage=localStorage.getItem(\"userInfo\")?JSON.parse(localStorage.getItem(\"userInfo\")):false;var initialState={userLogin:{userInfo:userInfoFromStorage}};var checkTokenExpirationMiddleware=function checkTokenExpirationMiddleware(){return function(next){return function(action){var token=JSON.parse(localStorage.getItem(\"userInfo\"))&&JSON.parse(localStorage.getItem(\"userInfo\"))[\"token\"];if(token){if(jwt.decode(token).exp<Date.now()/1000){localStorage.removeItem(\"userInfo\");next(action);}else{next(action);}}else{next(action);}};};};var middleware=[thunk,checkTokenExpirationMiddleware];var composeEnhance=composeWithDevTools({trace:true,traceLimit:10});var store=createStore(reducer,initialState,composeEnhance(applyMiddleware.apply(void 0,middleware)));export default store;","map":{"version":3,"sources":["C:/Users/elijr/Desktop/CODING/Personal Projects/Portfolio/eco/frontend/src/store.js"],"names":["jwt","createStore","combineReducers","applyMiddleware","thunk","composeWithDevTools","blogListReducer","blogCommentReducer","blogCommentDeleteReducer","blogPostDeleteReducer","blogLikeReducer","topBlogReducer","myBlogReducer","singleBlogReducer","blogCreateReducer","productListReducer","productDetailsReducer","topProductsReducer","productReviewReducer","productCreateReducer","productDeleteReducer","productUpdateReducer","userRegisterReducer","userUpdateProfileReducer","userProfileReducer","userDetailsReducer","userLoginReducer","userListReducer","userDeleteReducer","userUpdateReducer","userAuthorReducer","cartAddReducer","cartGetReducer","cartControlReducer","orderListReducer","orderCreateReducer","orderDetailsReducer","orderPayReducer","orderDeliverReducer","orderAllReducer","reducer","blogLike","blogComment","blogList","blogCommentDelete","blogDeletePost","myBlogs","topBlog","singleBlog","createBlog","productList","productDetails","topProducts","productReview","productCreate","productDelete","productUpdate","userRegister","userUpdateProfile","userDetails","userProfile","userAuthor","userLogin","userList","userDelete","userUpdate","cartAdd","cartGet","cartControl","orderList","orderCreate","orderDetails","orderPay","orderDeliver","orderAll","userInfoFromStorage","localStorage","getItem","JSON","parse","initialState","userInfo","checkTokenExpirationMiddleware","next","action","token","decode","exp","Date","now","removeItem","middleware","composeEnhance","trace","traceLimit","store"],"mappings":"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","sourcesContent":["import jwt from \"jsonwebtoken\";\r\nimport { createStore, combineReducers, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport {\r\n  blogListReducer,\r\n  blogCommentReducer,\r\n  blogCommentDeleteReducer,\r\n  blogPostDeleteReducer,\r\n  blogLikeReducer,\r\n  topBlogReducer,\r\n  myBlogReducer,\r\n  singleBlogReducer,\r\n  blogCreateReducer,\r\n} from \"./reducers/blogReducers.js\";\r\nimport {\r\n  productListReducer,\r\n  productDetailsReducer,\r\n  topProductsReducer,\r\n  productReviewReducer,\r\n  productCreateReducer,\r\n  productDeleteReducer,\r\n  productUpdateReducer,\r\n} from \"./reducers/productReducers.js\";\r\nimport {\r\n  userRegisterReducer,\r\n  userUpdateProfileReducer,\r\n  userProfileReducer,\r\n  userDetailsReducer,\r\n  userLoginReducer,\r\n  userListReducer,\r\n  userDeleteReducer,\r\n  userUpdateReducer,\r\n  userAuthorReducer,\r\n} from \"./reducers/userReducers.js\";\r\nimport {\r\n  cartAddReducer,\r\n  cartGetReducer,\r\n  cartControlReducer,\r\n} from \"./reducers/cartReducers.js\";\r\nimport {\r\n  orderListReducer,\r\n  orderCreateReducer,\r\n  orderDetailsReducer,\r\n  orderPayReducer,\r\n  orderDeliverReducer,\r\n  orderAllReducer,\r\n} from \"./reducers/orderReducers.js\";\r\n\r\nconst reducer = combineReducers({\r\n  blogLike: blogLikeReducer,\r\n  blogComment: blogCommentReducer,\r\n  blogList: blogListReducer,\r\n  blogCommentDelete: blogCommentDeleteReducer,\r\n  blogDeletePost: blogPostDeleteReducer,\r\n  myBlogs: myBlogReducer,\r\n  topBlog: topBlogReducer,\r\n  singleBlog: singleBlogReducer,\r\n  createBlog: blogCreateReducer,\r\n  productList: productListReducer,\r\n  productDetails: productDetailsReducer,\r\n  topProducts: topProductsReducer,\r\n  productReview: productReviewReducer,\r\n  productCreate: productCreateReducer,\r\n  productDelete: productDeleteReducer,\r\n  productUpdate: productUpdateReducer,\r\n  userRegister: userRegisterReducer,\r\n  userUpdateProfile: userUpdateProfileReducer,\r\n  userDetails: userDetailsReducer,\r\n  userProfile: userProfileReducer,\r\n  userAuthor: userAuthorReducer,\r\n  userLogin: userLoginReducer,\r\n  userList: userListReducer,\r\n  userDelete: userDeleteReducer,\r\n  userUpdate: userUpdateReducer,\r\n  cartAdd: cartAddReducer,\r\n  cartGet: cartGetReducer,\r\n  cartControl: cartControlReducer,\r\n  orderList: orderListReducer,\r\n  orderCreate: orderCreateReducer,\r\n  orderDetails: orderDetailsReducer,\r\n  orderPay: orderPayReducer,\r\n  orderDeliver: orderDeliverReducer,\r\n  orderAll: orderAllReducer,\r\n});\r\n\r\nconst userInfoFromStorage = localStorage.getItem(\"userInfo\")\r\n  ? JSON.parse(localStorage.getItem(\"userInfo\"))\r\n  : false;\r\n\r\nconst initialState = { userLogin: { userInfo: userInfoFromStorage } };\r\n\r\nconst checkTokenExpirationMiddleware = () => (next) => (action) => {\r\n  const token =\r\n    JSON.parse(localStorage.getItem(\"userInfo\")) &&\r\n    JSON.parse(localStorage.getItem(\"userInfo\"))[\"token\"];\r\n  if (token) {\r\n    if (jwt.decode(token).exp < Date.now() / 1000) {\r\n      localStorage.removeItem(\"userInfo\");\r\n      next(action);\r\n    } else {\r\n      next(action);\r\n    }\r\n  } else {\r\n    next(action);\r\n  }\r\n};\r\n\r\nconst middleware = [thunk, checkTokenExpirationMiddleware];\r\n\r\nconst composeEnhance = composeWithDevTools({\r\n  trace: true,\r\n  traceLimit: 10,\r\n});\r\n\r\nconst store = createStore(\r\n  reducer,\r\n  initialState,\r\n  composeEnhance(applyMiddleware(...middleware))\r\n);\r\n\r\nexport default store;\r\n"]},"metadata":{},"sourceType":"module"}