{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/elijr/Desktop/CODING/Personal Projects/Portfolio/eco/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/elijr/Desktop/CODING/Personal Projects/Portfolio/eco/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";import{ADD_CART_FAIL,ADD_CART_REQUEST,ADD_CART_SUCCESS,CONTROL_CART_FAIL,CONTROL_CART_REQUEST,CONTROL_CART_SUCCESS,GET_CART_FAIL,GET_CART_REQUEST,GET_CART_SUCCESS}from\"../constants/cartConstants\";export var addItemToCart=function addItemToCart(name,price,image,_id,qty){var options=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;var optionName=arguments.length>6&&arguments[6]!==undefined?arguments[6]:null;return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var _getState,userInfo,config,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:ADD_CART_REQUEST});console.log(name,price,image,_id,qty,options);_getState=getState(),userInfo=_getState.userLogin.userInfo;console.log(userInfo);config={headers:{Authorization:\"Bearer \".concat(userInfo.token)}};_context.next=8;return axios.post(\"/api/cart\",{name:name,price:price,image:image,_id:_id,qty:qty,options:options,optionName:optionName},config);case 8:_yield$axios$post=_context.sent;data=_yield$axios$post.data;console.log(data);dispatch({type:ADD_CART_SUCCESS,payload:data});_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);dispatch({type:ADD_CART_FAIL,payload:_context.t0.response&&_context.t0.response.data.message?_context.t0.response.data.message:_context.t0.message});case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,14]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};export var controlCart=function controlCart(_id,input){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var _getState2,userInfo,config,_yield$axios$put,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;dispatch({type:CONTROL_CART_REQUEST});_getState2=getState(),userInfo=_getState2.userLogin.userInfo;config={headers:{Authorization:\"Bearer \".concat(userInfo.token)}};_context2.next=6;return axios.put(\"/api/cart\",{_id:_id,input:input},config);case 6:_yield$axios$put=_context2.sent;data=_yield$axios$put.data;dispatch({type:CONTROL_CART_SUCCESS,payload:data});_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);dispatch({type:CONTROL_CART_FAIL,payload:_context2.t0.response&&_context2.t0.response.data.message?_context2.t0.response.data.message:_context2.t0.message});case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,11]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}();};export var getCart=function getCart(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var _getState3,userInfo,config,_yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;dispatch({type:GET_CART_REQUEST});_getState3=getState(),userInfo=_getState3.userLogin.userInfo;config={headers:{Authorization:\"Bearer \".concat(userInfo.token)}};_context3.next=6;return axios.get(\"/api/cart\",config);case 6:_yield$axios$get=_context3.sent;data=_yield$axios$get.data;dispatch({type:GET_CART_SUCCESS,payload:data});_context3.next=14;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](0);dispatch({type:GET_CART_FAIL,payload:_context3.t0.response&&_context3.t0.response.data.message?_context3.t0.response.data.message:_context3.t0.message});case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[0,11]]);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/elijr/Desktop/CODING/Personal Projects/Portfolio/eco/frontend/src/actions/cartActions.js"],"names":["axios","ADD_CART_FAIL","ADD_CART_REQUEST","ADD_CART_SUCCESS","CONTROL_CART_FAIL","CONTROL_CART_REQUEST","CONTROL_CART_SUCCESS","GET_CART_FAIL","GET_CART_REQUEST","GET_CART_SUCCESS","addItemToCart","name","price","image","_id","qty","options","optionName","dispatch","getState","type","console","log","userInfo","userLogin","config","headers","Authorization","token","post","data","payload","response","message","controlCart","input","put","getCart","get"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport {\r\n  ADD_CART_FAIL,\r\n  ADD_CART_REQUEST,\r\n  ADD_CART_SUCCESS,\r\n  CONTROL_CART_FAIL,\r\n  CONTROL_CART_REQUEST,\r\n  CONTROL_CART_SUCCESS,\r\n  GET_CART_FAIL,\r\n  GET_CART_REQUEST,\r\n  GET_CART_SUCCESS,\r\n} from \"../constants/cartConstants\";\r\n\r\nexport const addItemToCart =\r\n  (name, price, image, _id, qty, options = null, optionName = null) =>\r\n  async (dispatch, getState) => {\r\n    try {\r\n      dispatch({ type: ADD_CART_REQUEST });\r\n      console.log(name, price, image, _id, qty, options);\r\n      const {\r\n        userLogin: { userInfo },\r\n      } = getState();\r\n      console.log(userInfo);\r\n      const config = {\r\n        headers: {\r\n          Authorization: `Bearer ${userInfo.token}`,\r\n        },\r\n      };\r\n\r\n      const { data } = await axios.post(\r\n        \"/api/cart\",\r\n        { name, price, image, _id, qty, options, optionName },\r\n        config\r\n      );\r\n      console.log(data);\r\n      dispatch({ type: ADD_CART_SUCCESS, payload: data });\r\n    } catch (error) {\r\n      dispatch({\r\n        type: ADD_CART_FAIL,\r\n        payload:\r\n          error.response && error.response.data.message\r\n            ? error.response.data.message\r\n            : error.message,\r\n      });\r\n    }\r\n  };\r\n\r\nexport const controlCart = (_id, input) => async (dispatch, getState) => {\r\n  try {\r\n    dispatch({ type: CONTROL_CART_REQUEST });\r\n\r\n    const {\r\n      userLogin: { userInfo },\r\n    } = getState();\r\n\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${userInfo.token}`,\r\n      },\r\n    };\r\n    const { data } = await axios.put(\"/api/cart\", { _id, input }, config);\r\n\r\n    dispatch({ type: CONTROL_CART_SUCCESS, payload: data });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: CONTROL_CART_FAIL,\r\n      payload:\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n\r\nexport const getCart = () => async (dispatch, getState) => {\r\n  try {\r\n    dispatch({ type: GET_CART_REQUEST });\r\n\r\n    const {\r\n      userLogin: { userInfo },\r\n    } = getState();\r\n\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${userInfo.token}`,\r\n      },\r\n    };\r\n\r\n    const { data } = await axios.get(\"/api/cart\", config);\r\n\r\n    dispatch({ type: GET_CART_SUCCESS, payload: data });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: GET_CART_FAIL,\r\n      payload:\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}